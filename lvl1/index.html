<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CYBERPUNK - Ordenar Cards</title>
  <link rel="stylesheet" href="./style.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

@keyframes glow {
  0%, 100% {
    text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff, 0 0 30px #00ffff;
  }
  50% {
    text-shadow: 0 0 20px #00ffff, 0 0 30px #00ffff, 0 0 40px #00ffff, 0 0 50px #00ffff;
  }
}

@keyframes pulse {
  0%, 100% {
    box-shadow: 0 0 20px rgba(0, 255, 255, 0.5), 0 0 40px rgba(0, 255, 255, 0.3);
  }
  50% {
    box-shadow: 0 0 30px rgba(0, 255, 255, 0.8), 0 0 60px rgba(0, 255, 255, 0.5), 0 0 80px rgba(0, 255, 255, 0.3);
  }
}

@keyframes slideScan {
  0% {
    transform: translateY(-100%);
  }
  100% {
    transform: translateY(100%);
  }
}

@keyframes codeFlicker {
  0%, 100% {
    opacity: 1;
    text-shadow: 0 0 20px #00ff00, 0 0 40px #00ff00, 0 0 60px #00ff00;
  }
  50% {
    opacity: 0.8;
    text-shadow: 0 0 30px #00ff00, 0 0 60px #00ff00, 0 0 90px #00ff00;
  }
}

@keyframes shake {
  0%, 100% {
    transform: translateX(0);
  }
  20%, 60% {
    transform: translateX(-8px);
  }
  40%, 80% {
    transform: translateX(8px);
  }
}

body {
  font-family: 'Rajdhani', 'Orbitron', monospace;
  background: #0a0a0f;
  min-height: 100vh;
  padding: 20px;
  position: relative;
  overflow-x: hidden;
  color: #00ffff;
}

.grid-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image: 
    linear-gradient(rgba(0, 255, 255, 0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
  background-size: 50px 50px;
  pointer-events: none;
  z-index: 0;
}

.scanlines {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    transparent 50%,
    rgba(0, 255, 255, 0.03) 50%
  );
  background-size: 100% 4px;
  pointer-events: none;
  z-index: 1;
  animation: slideScan 8s linear infinite;
}

.level-button {
  position: fixed;
  bottom: 30px;
  right: 30px;
  z-index: 1000;
  padding: 15px 30px;
  background: linear-gradient(135deg, rgba(0, 255, 255, 0.2) 0%, rgba(0, 200, 255, 0.2) 100%);
  color: #00ffff;
  border: 2px solid #00ffff;
  cursor: pointer;
  border-radius: 0;
  font-family: 'Orbitron', monospace;
  font-size: 14px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 2px;
  transition: all 0.3s ease;
  box-shadow: 
    0 0 20px rgba(0, 255, 255, 0.5),
    inset 0 0 20px rgba(0, 255, 255, 0.1);
  clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
}

.level-button:hover {
  transform: translateY(-2px);
  box-shadow: 
    0 0 40px rgba(0, 255, 255, 0.8),
    0 0 80px rgba(0, 255, 255, 0.5),
    inset 0 0 30px rgba(0, 255, 255, 0.2);
  color: #ffffff;
  text-shadow: 0 0 10px #00ffff;
}

.level-button:active {
  transform: translateY(0);
}

.game-container {
  text-align: center;
  max-width: 1200px;
  margin: 0 auto;
  padding: 20px;
  position: relative;
  z-index: 2;
}

.cyber-title {
  font-family: 'Orbitron', monospace;
  font-size: 36px;
  font-weight: 900;
  color: #00ffff;
  text-transform: uppercase;
  letter-spacing: 4px;
  margin-bottom: 30px;
  text-shadow: 
    0 0 10px #00ffff,
    0 0 20px #00ffff,
    0 0 30px #00ffff,
    0 0 40px #00ffff;
  animation: glow 2s ease-in-out infinite;
}

.cyber-subtitle {
  font-family: 'Rajdhani', monospace;
  font-size: 20px;
  font-weight: 600;
  color: #ff00ff;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin: 30px 0;
  text-shadow: 
    0 0 10px rgba(255, 0, 255, 0.5),
    0 0 20px rgba(255, 0, 255, 0.3);
}

.problems-container {
  margin-bottom: 30px;
}

.neon-text {
  color: #00ffff;
  text-shadow: 
    0 0 10px rgba(0, 255, 255, 0.5),
    0 0 20px rgba(0, 255, 255, 0.3);
  font-weight: 600;
  font-size: clamp(1rem, 2vw, 1.3rem);
  line-height: 1.8;
}

.cards-container {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 30px;
  margin-top: 40px;
  flex-wrap: wrap;
  gap: 20px;
}

.card {
  background: linear-gradient(135deg, rgba(0, 255, 255, 0.1) 0%, rgba(255, 0, 255, 0.1) 100%);
  padding: 20px 30px;
  border-radius: 0;
  cursor: grab;
  min-width: 140px;
  text-align: center;
  font-size: 24px;
  font-weight: 700;
  font-family: 'Orbitron', monospace;
  color: #00ffff;
  border: 2px solid #00ffff;
  box-shadow: 
    0 0 20px rgba(0, 255, 255, 0.5),
    inset 0 0 20px rgba(0, 255, 255, 0.1);
  position: relative;
  transition: all 0.3s ease;
  text-transform: uppercase;
  letter-spacing: 2px;
  clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
}

.card::before {
  content: '';
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(45deg, #00ffff, #ff00ff, #a855f7, #ff00ff);
  z-index: -1;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.card:hover {
  transform: translateY(-5px) scale(1.05);
  box-shadow: 
    0 0 30px rgba(0, 255, 255, 0.8),
    0 0 60px rgba(0, 255, 255, 0.5),
    inset 0 0 30px rgba(0, 255, 255, 0.2);
  color: #ffffff;
  text-shadow: 
    0 0 10px #00ffff,
    0 0 20px #00ffff;
}

.card:hover::before {
  opacity: 1;
  animation: pulse 1s ease-in-out infinite;
}

.order-container {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-top: 30px;
  gap: 20px;
  flex-wrap: wrap;
}

.drop-zone {
  width: 160px;
  height: 190px;
  border: 3px dashed rgba(0, 255, 255, 0.3);
  display: flex;
  justify-content: center;
  align-items: center;
  background: rgba(0, 255, 255, 0.02);
  min-height: 190px;
  border-radius: 0;
  position: relative;
  transition: all 0.3s ease;
  clip-path: polygon(15px 0, 100% 0, 100% calc(100% - 15px), calc(100% - 15px) 100%, 0 100%, 0 15px);
}

.drop-zone::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  border: 2px solid transparent;
  background: linear-gradient(45deg, #00ffff, #ff00ff) border-box;
  -webkit-mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
  -webkit-mask-composite: destination-out;
  mask: linear-gradient(#fff 0 0) padding-box, linear-gradient(#fff 0 0);
  mask-composite: exclude;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.drop-zone.drag-over {
  border-color: #00ff88;
  background: rgba(0, 255, 136, 0.1);
  box-shadow: 
    0 0 30px rgba(0, 255, 136, 0.8),
    inset 0 0 30px rgba(0, 255, 136, 0.2);
  animation: pulse 0.5s ease-in-out infinite;
}

.drop-zone.drag-over::before {
  opacity: 1;
}

.cyber-button {
  margin-top: 30px;
  padding: 15px 40px;
  background: linear-gradient(135deg, rgba(0, 255, 255, 0.2) 0%, rgba(255, 0, 255, 0.2) 100%);
  color: #00ffff;
  border: 2px solid #00ffff;
  cursor: pointer;
  border-radius: 0;
  font-family: 'Orbitron', monospace;
  font-size: 16px;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 3px;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
  box-shadow: 
    0 0 20px rgba(0, 255, 255, 0.5),
    inset 0 0 20px rgba(0, 255, 255, 0.1);
  clip-path: polygon(10px 0, 100% 0, 100% calc(100% - 10px), calc(100% - 10px) 100%, 0 100%, 0 10px);
}

.button-text {
  position: relative;
  z-index: 2;
  text-shadow: 0 0 10px #00ffff;
}

.button-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: radial-gradient(circle, rgba(0, 255, 255, 0.5) 0%, transparent 70%);
  transform: translate(-50%, -50%);
  transition: width 0.6s ease, height 0.6s ease;
}

.cyber-button:hover {
  transform: translateY(-2px);
  box-shadow: 
    0 0 40px rgba(0, 255, 255, 0.8),
    0 0 80px rgba(0, 255, 255, 0.5),
    inset 0 0 30px rgba(0, 255, 255, 0.2);
  color: #ffffff;
}

.cyber-button:hover .button-glow {
  width: 300px;
  height: 300px;
}

.cyber-button:active {
  transform: translateY(0);
}

.buttons-container {
  display: flex;
  gap: 20px;
  justify-content: center;
  margin-top: 30px;
  flex-wrap: wrap;
}

.new-problem-btn {
  background: linear-gradient(135deg, rgba(255, 0, 255, 0.2) 0%, rgba(0, 255, 255, 0.2) 100%);
  border-color: #ff00ff;
}

.new-problem-btn:hover {
  box-shadow: 
    0 0 40px rgba(255, 0, 255, 0.8),
    0 0 80px rgba(255, 0, 255, 0.5),
    inset 0 0 30px rgba(255, 0, 255, 0.2);
}

.result-text {
  margin-top: 25px;
  font-size: 20px;
  font-weight: 600;
  font-family: 'Rajdhani', monospace;
  color: #00ff88;
  text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
  text-transform: uppercase;
  letter-spacing: 2px;
}

/* Panel Glow - Card de Instrucciones */
.panel-glow {
  background: rgba(15, 15, 26, 0.7);
  border: 1px solid rgba(0, 255, 255, 0.3);
  border-radius: 8px;
  backdrop-filter: blur(10px);
  margin-bottom: 30px;
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.panel-glow::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(0, 255, 255, 0.1),
    transparent
  );
  transition: left 0.5s ease;
}

.panel-glow:hover::before {
  left: 100%;
}

.panel-glow:hover {
  border-color: #00ffff;
  box-shadow: 
    0 0 20px rgba(0, 255, 255, 0.5),
    0 0 40px rgba(0, 255, 255, 0.3),
    0 0 60px rgba(0, 255, 255, 0.2);
}

.panel-header {
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 15px 20px;
  background: rgba(0, 0, 0, 0.3);
  border-bottom: 1px solid rgba(0, 255, 255, 0.3);
}

.status-indicator {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  background: #00ff88;
  box-shadow: 
    0 0 20px rgba(0, 255, 136, 0.5),
    0 0 40px rgba(0, 255, 136, 0.3),
    0 0 60px rgba(0, 255, 136, 0.2);
  animation: statusPulse 2s infinite;
}

@keyframes statusPulse {
  0%, 100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.5;
    transform: scale(1.2);
  }
}

.panel-title {
  font-family: 'Orbitron', monospace;
  font-size: clamp(0.85rem, 1.5vw, 1rem);
  font-weight: 700;
  color: #00ffff;
  text-transform: uppercase;
  letter-spacing: 2px;
  flex: 1;
}

.panel-content {
  padding: 25px;
}

/* Instrucciones */
.instructions {
  margin-bottom: 30px;
}

.instruction-text {
  font-size: clamp(1rem, 2vw, 1.3rem);
  color: #ffffff;
  font-weight: 500;
  line-height: 1.8;
  text-align: center;
}

.instruction-text strong {
  color: #ff00ff;
  text-shadow: 0 0 10px rgba(255, 0, 255, 0.5);
  font-weight: 700;
}

.modal {
  display: none;
  position: fixed;
  z-index: 10000;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.9);
  backdrop-filter: blur(5px);
}

.cyber-modal {
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.95) 0%, rgba(26, 0, 51, 0.95) 100%);
  margin: 10% auto;
  padding: 0;
  border: 3px solid #00ffff;
  border-radius: 0;
  width: 90%;
  max-width: 500px;
  text-align: center;
  position: relative;
  box-shadow: 
    0 0 50px rgba(0, 255, 255, 0.8),
    inset 0 0 50px rgba(0, 255, 255, 0.1);
  clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
  animation: pulse 2s ease-in-out infinite;
}

.modal-header {
  padding: 15px;
  border-bottom: 2px solid #00ffff;
  background: rgba(0, 255, 255, 0.05);
  position: relative;
  z-index: 1;
}

.close {
  color: #00ffff;
  float: right;
  font-size: 32px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  text-shadow: 0 0 10px #00ffff;
  line-height: 1;
}

.close:hover {
  color: #ff00ff;
  text-shadow: 0 0 20px rgba(255, 0, 255, 0.5);
  transform: scale(1.2);
}

.modal-body {
  padding: 40px 30px;
  position: relative;
  z-index: 1;
}

.modal-title {
  font-family: 'Orbitron', monospace;
  font-size: 32px;
  font-weight: 900;
  color: #00ff00;
  margin-bottom: 20px;
  text-transform: uppercase;
  letter-spacing: 3px;
  text-shadow: 
    0 0 20px #00ff00,
    0 0 40px #00ff00,
    0 0 60px #00ff00;
  animation: glow 2s ease-in-out infinite;
}

.modal-message {
  font-size: 20px;
  color: #00ffff;
  margin: 20px 0;
  font-weight: 600;
  text-shadow: 0 0 10px #00ffff;
}

.code-container {
  margin: 30px 0;
  padding: 20px;
  background: rgba(0, 255, 0, 0.05);
  border: 2px solid #00ff00;
  position: relative;
}

.code-label {
  display: block;
  font-family: 'Orbitron', monospace;
  font-size: 14px;
  color: #00ff00;
  text-transform: uppercase;
  letter-spacing: 2px;
  margin-bottom: 10px;
  text-shadow: 0 0 10px #00ff00;
}

.neon-code {
  font-family: 'Orbitron', monospace;
  font-size: 48px;
  font-weight: 900;
  color: #00ff00;
  margin-top: 15px;
  text-shadow: 
    0 0 20px #00ff00,
    0 0 40px #00ff00,
    0 0 60px #00ff00,
    0 0 80px #00ff00;
  animation: codeFlicker 1.5s ease-in-out infinite;
  letter-spacing: 8px;
}

.success-indicator {
  margin-top: 30px;
  height: 4px;
  background: rgba(0, 255, 0, 0.2);
  position: relative;
  overflow: hidden;
}

.success-bar {
  height: 100%;
  width: 100%;
  background: linear-gradient(90deg, #00ff00, #00ffff, #00ff00);
  box-shadow: 0 0 20px #00ff00;
  animation: slideScan 2s linear infinite;
}

.level-modal-content {
  background: linear-gradient(135deg, rgba(0, 0, 0, 0.95) 0%, rgba(26, 0, 51, 0.95) 100%);
  margin: 10% auto;
  padding: 0;
  border: 3px solid #00ffff;
  border-radius: 0;
  width: 90%;
  max-width: 500px;
  text-align: center;
  position: relative;
  box-shadow: 
    0 0 50px rgba(0, 255, 255, 0.8),
    inset 0 0 50px rgba(0, 255, 255, 0.1);
  clip-path: polygon(20px 0, 100% 0, 100% calc(100% - 20px), calc(100% - 20px) 100%, 0 100%, 0 20px);
  animation: pulse 2s ease-in-out infinite;
  overflow: hidden;
}

.level-modal-background {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
  opacity: 0.3;
}

.level-background-img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  filter: blur(2px);
}

.code-image-wrapper {
  position: relative;
  display: inline-block;
  width: 100%;
  max-width: 400px;
}

.level-code-img {
  width: 100%;
  max-width: 400px;
  height: auto;
  margin-bottom: 20px;
  filter: drop-shadow(0 0 20px rgba(0, 255, 255, 0.8));
  animation: pulse 2s ease-in-out infinite;
  position: relative;
  z-index: 1;
  display: block;
  pointer-events: none;
}

.clickable-area {
  position: absolute;
  width: 80px;
  height: 80px;
  background: transparent;
  cursor: pointer;
  z-index: 10;
  border-radius: 50%;
  border: 2px solid transparent;
}

.clickable-area:hover {
  border-color: rgba(0, 255, 255, 0.3);
  background: rgba(0, 255, 255, 0.1);
}

.clickable-area:active {
  background: rgba(0, 255, 255, 0.2);
}

.level-code-text {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  z-index: 4;
  pointer-events: none;
}

.level-code-display {
  font-family: 'Orbitron', monospace;
  font-size: 64px;
  font-weight: 900;
  color: #a855f7;
  text-shadow: 
    0 0 20px rgba(168, 85, 247, 0.5),
    0 0 40px rgba(168, 85, 247, 0.3),
    0 0 60px rgba(168, 85, 247, 0.2),
    0 0 80px rgba(168, 85, 247, 0.1);
  animation: codeFlicker 1.5s ease-in-out infinite;
  letter-spacing: 12px;
  text-align: center;
  margin: 0;
}

#level-modal .close {
  color: #00ffff;
  float: right;
  font-size: 32px;
  font-weight: bold;
  cursor: pointer;
  transition: all 0.3s ease;
  text-shadow: 0 0 10px #00ffff;
  line-height: 1;
}

/* Estilos para el teclado num√©rico */
.keyboard-container {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  width: 100%;
  max-width: 280px;
  margin: 0 auto;
  padding: 15px;
  border: 2px solid transparent;
  border-radius: 12px;
  transition: border 0.3s ease, box-shadow 0.3s ease;
}

.keyboard-display {
  width: 100%;
  margin-bottom: 20px;
}

#keyboard-input {
  width: 100%;
  padding: 12px;
  font-size: 32px;
  font-family: 'Orbitron', monospace;
  font-weight: 900;
  text-align: center;
  background: rgba(0, 0, 0, 0.7);
  border: 2px solid #00ffff;
  border-radius: 10px;
  color: #00ffff;
  text-shadow: 
    0 0 10px #00ffff,
    0 0 20px #00ffff;
  box-shadow: 
    0 0 20px rgba(0, 255, 255, 0.5),
    inset 0 0 20px rgba(0, 255, 255, 0.1);
  outline: none;
  letter-spacing: 6px;
  transition: border 0.3s ease, box-shadow 0.3s ease, color 0.3s ease;
}

#keyboard-input::placeholder {
  color: rgba(0, 255, 255, 0.3);
}

.keyboard-container.error {
  border: 2px solid rgba(255, 0, 64, 0.9);
  box-shadow: 0 0 25px rgba(255, 0, 64, 0.6);
}

#keyboard-input.error {
  border-color: rgba(255, 0, 64, 0.9);
  color: #ff0040;
  box-shadow: 
    0 0 25px rgba(255, 0, 64, 0.6),
    inset 0 0 15px rgba(255, 0, 64, 0.3);
}

.keyboard-container.success {
  border: 2px solid rgba(0, 255, 136, 0.9);
  box-shadow: 0 0 25px rgba(0, 255, 136, 0.6);
}

#keyboard-input.success {
  border-color: rgba(0, 255, 136, 0.9);
  color: #00ff88;
  box-shadow: 
    0 0 25px rgba(0, 255, 136, 0.6),
    inset 0 0 15px rgba(0, 255, 136, 0.3);
}

.level-modal-content.shake {
  animation: shake 0.45s ease;
}

.keyboard-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  width: 100%;
}

.keyboard-feedback {
  margin-top: 15px;
  font-family: 'Orbitron', monospace;
  font-size: 14px;
  letter-spacing: 2px;
  text-transform: uppercase;
  text-align: center;
  min-height: 18px;
  color: #00ffff;
  text-shadow: 0 0 10px rgba(0, 255, 255, 0.4);
  transition: color 0.3s ease, text-shadow 0.3s ease;
}

.keyboard-feedback.error {
  color: #ff0040;
  text-shadow: 0 0 12px rgba(255, 0, 64, 0.6);
}

.keyboard-feedback.success {
  color: #00ff88;
  text-shadow: 0 0 12px rgba(0, 255, 136, 0.6);
}

.keyboard-btn {
  aspect-ratio: 1;
  font-size: 22px;
  font-weight: 700;
  font-family: 'Orbitron', monospace;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 
    0 4px 15px rgba(0, 0, 0, 0.3),
    inset 0 2px 5px rgba(255, 255, 255, 0.1);
  position: relative;
  overflow: hidden;
  color: #ffffff;
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
}

.keyboard-btn::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.3);
  transform: translate(-50%, -50%);
  transition: width 0.4s ease, height 0.4s ease;
}

.keyboard-btn:active::before {
  width: 300px;
  height: 300px;
}

.keyboard-btn:active {
  transform: scale(0.95);
}

.num-btn {
  background: linear-gradient(135deg, rgba(0, 255, 255, 0.2) 0%, rgba(0, 200, 255, 0.3) 100%);
  border: 2px solid #00ffff;
  color: #00ffff;
}

.num-btn:hover {
  background: linear-gradient(135deg, rgba(0, 255, 255, 0.4) 0%, rgba(0, 200, 255, 0.5) 100%);
  box-shadow: 
    0 0 25px rgba(0, 255, 255, 0.8),
    0 0 50px rgba(0, 255, 255, 0.5),
    inset 0 0 20px rgba(0, 255, 255, 0.2);
  transform: translateY(-3px);
  text-shadow: 
    0 0 10px #00ffff,
    0 0 20px #00ffff;
}

.delete-btn {
  background: linear-gradient(135deg, rgba(255, 0, 0, 0.3) 0%, rgba(200, 0, 0, 0.4) 100%);
  border: 2px solid #ff0000;
  color: #ff0000;
}

.delete-btn:hover {
  background: linear-gradient(135deg, rgba(255, 0, 0, 0.5) 0%, rgba(200, 0, 0, 0.6) 100%);
  box-shadow: 
    0 0 25px rgba(255, 0, 0, 0.8),
    0 0 50px rgba(255, 0, 0, 0.5),
    inset 0 0 20px rgba(255, 0, 0, 0.2);
  transform: translateY(-3px);
  text-shadow: 
    0 0 10px #ff0000,
    0 0 20px #ff0000;
}

.confirm-btn {
  background: linear-gradient(135deg, rgba(0, 255, 0, 0.3) 0%, rgba(0, 200, 0, 0.4) 100%);
  border: 2px solid #00ff00;
  color: #00ff00;
}

.confirm-btn:hover {
  background: linear-gradient(135deg, rgba(0, 255, 0, 0.5) 0%, rgba(0, 200, 0, 0.6) 100%);
  box-shadow: 
    0 0 25px rgba(0, 255, 0, 0.8),
    0 0 50px rgba(0, 255, 0, 0.5),
    inset 0 0 20px rgba(0, 255, 0, 0.2);
  transform: translateY(-3px);
  text-shadow: 
    0 0 10px #00ff00,
    0 0 20px #00ff00;
}

/* Responsive para m√≥viles */
@media (max-width: 768px) {
  .keyboard-container {
    max-width: 100%;
    padding: 12px;
  }

  #keyboard-input {
    font-size: 28px;
    padding: 10px;
    letter-spacing: 4px;
  }

  .keyboard-grid {
    gap: 8px;
  }

  .keyboard-btn {
    font-size: 18px;
    border-radius: 8px;
  }
}

@media (max-width: 480px) {
  .keyboard-container {
    padding: 10px;
  }

  #keyboard-input {
    font-size: 24px;
    padding: 8px;
    letter-spacing: 2px;
  }

  .keyboard-grid {
    gap: 6px;
  }

  .keyboard-btn {
    font-size: 16px;
    border-radius: 8px;
  }
}
  </style>
</head>
<body>
  <div class="grid-background"></div>
  <div class="scanlines"></div>

  <div class="game-container">

    <h2 class="cyber-title">[SYSTEM] ORDENAR CARDS POR EDAD</h2>
    
    <section class="instructions panel-glow">
      <div class="panel-header">
        <span class="status-indicator"></span>
        <h2 class="panel-title">INSTRUCCIONES DEL SISTEMA</h2>
      </div>
      <div class="panel-content">
        <p class="instruction-text" id="instruction-text">Cargando instrucciones...</p>
      </div>
    </section>

    <section class="problems-container panel-glow">
      <div class="panel-header">
        <span class="status-indicator"></span>
        <h2 class="panel-title">PROBLEMA DEL SISTEMA</h2>
      </div>
      <div class="panel-content">
        <p class="neon-text instruction-text" id="problem-text">Cargando problema...</p>
      </div>
    </section>

    <h3 class="cyber-subtitle">[DRAG & DROP] Arrastra las Cards en el orden correcto (de menor a mayor edad):</h3>
    <div class="order-container" id="order-container">
      <div class="drop-zone" id="drop-zone-1" data-position="0"></div>
      <div class="drop-zone" id="drop-zone-2" data-position="1"></div>
      <div class="drop-zone" id="drop-zone-3" data-position="2"></div>
      <div class="drop-zone" id="drop-zone-4" data-position="3"></div>
    </div>

    <div class="cards-container" id="cards-container">
    </div>


    <div class="buttons-container">
      <button class="cyber-button" onclick="checkOrder()">
        <span class="button-text">[VERIFY] COMPROBAR ORDEN</span>
        <span class="button-glow"></span>
    </div>
    <p id="result" class="result-text"></p>
    
    <button class="level-button" onclick="showLevelModal()">
      <span class="button-text">üîí [LEVEL] PASAR DE NIVEL</span>
    </button>
  </div>

  <div id="modal" class="modal">
    <div class="modal-content cyber-modal">
      <div class="modal-header">
        <span class="close" onclick="closeModal()">&times;</span>
      </div>
      <div class="modal-body">
        <h2 class="modal-title">[ACCESS GRANTED]</h2>
        <p class="modal-message">El orden es el adecuado.</p>
        <div class="code-container">
          <span class="code-label">[CODE]</span>
          <p class="code neon-code">0816</p>
        </div>
        <div class="success-indicator">
          <div class="success-bar"></div>
        </div>
      </div>
    </div>
  </div>

  <div id="level-modal" class="modal">
    <div class="level-modal-content cyber-modal">
      <div class="level-modal-background">
        <img src="images/fondo-code.png" alt="Fondo" class="level-background-img">
      </div>
      <div class="modal-header">
        <span class="close" onclick="closeLevelModal()">&times;</span>
      </div>
      <div class="modal-body">
        <div class="keyboard-container">
          <div class="keyboard-display">
            <input type="text" id="keyboard-input" readonly placeholder="0">
          </div>
          <p class="keyboard-feedback" id="keyboard-feedback"></p>
          <div class="keyboard-grid">
            <button class="keyboard-btn num-btn" onclick="pressNumber(1)">1</button>
            <button class="keyboard-btn num-btn" onclick="pressNumber(2)">2</button>
            <button class="keyboard-btn num-btn" onclick="pressNumber(3)">3</button>
            <button class="keyboard-btn num-btn" onclick="pressNumber(4)">4</button>
            <button class="keyboard-btn num-btn" onclick="pressNumber(5)">5</button>
            <button class="keyboard-btn num-btn" onclick="pressNumber(6)">6</button>
            <button class="keyboard-btn num-btn" onclick="pressNumber(7)">7</button>
            <button class="keyboard-btn num-btn" onclick="pressNumber(8)">8</button>
            <button class="keyboard-btn num-btn" onclick="pressNumber(9)">9</button>
            <button class="keyboard-btn delete-btn" onclick="pressDelete()">X</button>
            <button class="keyboard-btn num-btn" onclick="pressNumber(0)">0</button>
            <button class="keyboard-btn confirm-btn" onclick="pressConfirm()">‚úî</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    let currentProblem = null;
let cards = [];
let dropZones = [];

const problems = [
  {
    name: "Problema 1",
    text: "Mar√≠a es mayor que Ana, Juan es mayor que Mar√≠a, Pedro es mayor que Juan, Ana es la m√°s joven",
    people: [
      { id: "card-ana", name: "Ana", age: 18 },
      { id: "card-maria", name: "Mar√≠a", age: 20 },
      { id: "card-juan", name: "Juan", age: 25 },
      { id: "card-pedro", name: "Pedro", age: 30 }
    ],
    correctOrder: ["card-ana", "card-maria", "card-juan", "card-pedro"],
    code: "0816"
  },
  {
    name: "Problema 2",
    text: "Carlos es mayor que Laura, David es mayor que Carlos, Sof√≠a es menor que Laura, David es el mayor",
    people: [
      { id: "card-sofia", name: "Sof√≠a", age: 16 },
      { id: "card-laura", name: "Laura", age: 22 },
      { id: "card-carlos", name: "Carlos", age: 28 },
      { id: "card-david", name: "David", age: 35 }
    ],
    correctOrder: ["card-sofia", "card-laura", "card-carlos", "card-david"],
    code: "2847"
  },
  {
    name: "Problema 3",
    text: "Luis es menor que Elena, Elena es menor que Roberto, Roberto es menor que Carmen, Carmen es la mayor",
    people: [
      { id: "card-luis", name: "Luis", age: 20 },
      { id: "card-elena", name: "Elena", age: 24 },
      { id: "card-roberto", name: "Roberto", age: 29 },
      { id: "card-carmen", name: "Carmen", age: 33 }
    ],
    correctOrder: ["card-luis", "card-elena", "card-roberto", "card-carmen"],
    code: "5291"
  },
  {
    name: "Problema 4",
    text: "Andr√©s es mayor que Patricia, Patricia es menor que Miguel, Miguel es menor que Isabel, Isabel es la mayor",
    people: [
      { id: "card-patricia", name: "Patricia", age: 17 },
      { id: "card-andres", name: "Andr√©s", age: 21 },
      { id: "card-miguel", name: "Miguel", age: 26 },
      { id: "card-isabel", name: "Isabel", age: 32 }
    ],
    correctOrder: ["card-patricia", "card-andres", "card-miguel", "card-isabel"],
    code: "7364"
  },
  {
    name: "Problema 5",
    text: "Diego es la m√°s joven, Diego es menor que Andrea, Andrea es menor que Fernando, Fernando es menor que Valeria",
    people: [
      { id: "card-diego", name: "Diego", age: 15 },
      { id: "card-andrea", name: "Andrea", age: 23 },
      { id: "card-fernando", name: "Fernando", age: 27 },
      { id: "card-valeria", name: "Valeria", age: 31 }
    ],
    correctOrder: ["card-diego", "card-andrea", "card-fernando", "card-valeria"],
    code: "4192"
  }
];

function initGame() {
  const randomIndex = Math.floor(Math.random() * problems.length);
  currentProblem = problems[randomIndex];
  
  document.getElementById('problem-text').textContent = currentProblem.text;
  document.getElementById('instruction-text').innerHTML = `Arrastra las cards desde el pool de datos hacia las zonas de orden en la parte superior. Debes ordenarlas de <strong>menor a mayor edad</strong> seg√∫n las pistas proporcionadas.`;
  document.getElementById('result').textContent = '';
  
  const cardsContainer = document.getElementById('cards-container');
  cardsContainer.innerHTML = '';
  
  dropZones = document.querySelectorAll('.drop-zone');
  dropZones.forEach(zone => {
    if (zone.firstElementChild) {
      const existingCard = zone.firstElementChild;
      cardsContainer.appendChild(existingCard);
      existingCard.setAttribute('draggable', 'true');
    }
  });
  
  const shuffledPeople = [...currentProblem.people].sort(() => Math.random() - 0.5);
  
  shuffledPeople.forEach(person => {
    const card = document.createElement('div');
    card.className = 'card';
    card.id = person.id;
    card.draggable = true;
    card.textContent = person.name;
    cardsContainer.appendChild(card);
  });
  
  cards = document.querySelectorAll('.card');
  
  setupDragAndDrop();
}

function setupDragAndDrop() {
  cards.forEach(card => {
    card.addEventListener('dragstart', dragStart);
    card.addEventListener('dragend', dragEnd);
  });

  dropZones.forEach(dropZone => {
    dropZone.addEventListener('dragover', dragOver);
    dropZone.addEventListener('dragleave', dragLeave);
    dropZone.addEventListener('drop', dropCard);
  });
}

function dragStart(e) {
  e.dataTransfer.setData('text', e.target.id);
  setTimeout(() => {
    e.target.style.display = 'none';
  }, 0);
}

function dragEnd(e) {
  e.target.style.display = 'block';
}

function dragOver(e) {
  e.preventDefault();
  e.currentTarget.classList.add('drag-over');
}

function dragLeave(e) {
  e.currentTarget.classList.remove('drag-over');
}

function dropCard(e) {
  e.preventDefault();
  e.currentTarget.classList.remove('drag-over');
  
  const cardId = e.dataTransfer.getData('text');
  const card = document.getElementById(cardId);
  
  if (e.currentTarget.children.length > 0) {
    const existingCard = e.currentTarget.firstElementChild;
    document.getElementById('cards-container').appendChild(existingCard);
    existingCard.setAttribute('draggable', 'true');
  }

  e.currentTarget.appendChild(card);
  card.setAttribute('draggable', 'false');
}

function checkOrder() {
  if (!currentProblem) return;
  
  const dropZonesArray = Array.from(dropZones);
  const cardOrder = dropZonesArray.map(zone => {
    const card = zone.firstElementChild;
    return card ? card.id : null;
  });
  
  let resultText = '';
  let isCorrect = true;

  if (cardOrder.includes(null)) {
    resultText = '¬°Incompleto! Debes colocar todas las cards en los lugares.';
    isCorrect = false;
  } else {
    cardOrder.forEach((cardId, index) => {
      if (cardId !== currentProblem.correctOrder[index]) {
        resultText = '¬°Incorrecto! El orden no es correcto. Intenta nuevamente.';
        isCorrect = false;
      }
    });
  }

  if (isCorrect) {
    resultText = '¬°Correcto! El orden es el adecuado.';
    showModal();
  } else {
    resultText = resultText || '¬°Incorrecto! El orden no es correcto. Intenta nuevamente.';
  }

  document.getElementById('result').textContent = resultText;
}

function showModal() {
  document.querySelector('.neon-code').textContent = '0816';
  document.getElementById('modal').style.display = 'block';
}

function closeModal() {
  document.getElementById('modal').style.display = 'none';
}

window.onclick = function(event) {
  const modal = document.getElementById('modal');
  if (event.target == modal) {
    closeModal();
  }
  const levelModal = document.getElementById('level-modal');
  if (event.target == levelModal) {
    closeLevelModal();
  }
}

let keyboardInput = '';

function clearKeyboardState() {
  const keyboardContainer = document.querySelector('.keyboard-container');
  const input = document.getElementById('keyboard-input');
  const feedback = document.getElementById('keyboard-feedback');
  if (keyboardContainer) {
    keyboardContainer.classList.remove('error', 'success');
  }
  if (input) {
    input.classList.remove('error', 'success');
  }
  if (feedback) {
    feedback.textContent = '';
    feedback.classList.remove('error', 'success');
  }
}

function triggerKeyboardError(message) {
  const keyboardContainer = document.querySelector('.keyboard-container');
  const levelModalContent = document.querySelector('.level-modal-content');
  const input = document.getElementById('keyboard-input');
  const feedback = document.getElementById('keyboard-feedback');

  if (keyboardContainer) {
    keyboardContainer.classList.remove('error');
    void keyboardContainer.offsetWidth;
    keyboardContainer.classList.add('error');
    setTimeout(() => keyboardContainer.classList.remove('error'), 600);
  }

  if (input) {
    input.classList.remove('error');
    void input.offsetWidth;
    input.classList.add('error');
    setTimeout(() => input.classList.remove('error'), 600);
  }

  if (feedback) {
    feedback.classList.remove('success');
    feedback.classList.add('error');
    feedback.textContent = message || 'C√ìDIGO INCORRECTO';
  }

  if (levelModalContent) {
    levelModalContent.classList.remove('shake');
    void levelModalContent.offsetWidth;
    levelModalContent.classList.add('shake');
    setTimeout(() => levelModalContent.classList.remove('shake'), 600);
  }
}

function triggerKeyboardSuccess(message) {
  const keyboardContainer = document.querySelector('.keyboard-container');
  const levelModalContent = document.querySelector('.level-modal-content');
  const input = document.getElementById('keyboard-input');
  const feedback = document.getElementById('keyboard-feedback');

  if (keyboardContainer) {
    keyboardContainer.classList.remove('success');
    void keyboardContainer.offsetWidth;
    keyboardContainer.classList.add('success');
  }

  if (input) {
    input.classList.remove('success');
    void input.offsetWidth;
    input.classList.add('success');
  }

  if (feedback) {
    feedback.classList.remove('error');
    feedback.classList.add('success');
    feedback.textContent = message || 'ACCESO PERMITIDO';
  }

  if (levelModalContent) {
    levelModalContent.classList.remove('shake');
  }
}

function closeLevelModal() {
  document.getElementById('level-modal').style.display = 'none';
}

function pressNumber(number) {
  clearKeyboardState();
  if (keyboardInput.length >= 4) {
    keyboardInput = keyboardInput.slice(0, 4);
    updateKeyboardDisplay();
    return;
  }
  keyboardInput += number.toString();
  updateKeyboardDisplay();
}

function pressDelete() {
  clearKeyboardState();
  keyboardInput = keyboardInput.slice(0, -1);
  updateKeyboardDisplay();
}

function pressConfirm() {
  if (keyboardInput === '') {
    triggerKeyboardError('INGRESA UN C√ìDIGO');
    return;
  }
  
  if (keyboardInput === '0816') {
    triggerKeyboardSuccess('ACCESO PERMITIDO');
    setTimeout(() => {
      window.location.href = '../lvl2/index.html';
    }, 1200);
  } else {
    triggerKeyboardError('C√ìDIGO INCORRECTO');
    keyboardInput = '';
    updateKeyboardDisplay();
  }
}

function updateKeyboardDisplay() {
  const input = document.getElementById('keyboard-input');
  if (input) {
    const displayValue = keyboardInput.slice(0, 4);
    input.value = displayValue;
    if (keyboardInput === '') {
      input.placeholder = '0';
    }
  }
}

// Limpiar el teclado cuando se abre el modal
function showLevelModal() {
  keyboardInput = '';
  updateKeyboardDisplay();
  clearKeyboardState();
  document.getElementById('level-modal').style.display = 'block';
}

window.addEventListener('DOMContentLoaded', initGame);

  </script>
</body>
</html>
